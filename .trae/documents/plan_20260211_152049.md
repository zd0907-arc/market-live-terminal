# 项目评估报告与优化方案

作为技术总监，我对 `market-live-terminal` 项目进行了全面的代码审查。这是一个基于 **React (Vite)** 和 **FastAPI** 的金融数据监控终端，主要功能是整合实时行情（腾讯/东方财富）与资金流向分析（新浪/AkShare）。

项目处于 **MVP（最小可行性产品）** 阶段，核心功能可用，但存在架构规范、性能瓶颈和数据源稳定性风险。

## 1. 现状评估

### ✅ 亮点
- **技术选型现代化**：前端使用 React 19 + TypeScript + TailwindCSS，后端使用 FastAPI，均为当前主流高效方案。
- **功能闭环**：实现了从数据采集、存储 (SQLite) 到可视化 (Recharts) 的完整流程。
- **UI 设计**：界面风格统一（深色金融风），组件化程度尚可。

### ⚠️ 关键风险与问题
1.  **后端并发阻塞 (Critical)**
    - `backend/app/services/market.py` 中使用了同步的 `requests` 库。在 FastAPI 的 `async` 路径下，这会**阻塞整个事件循环**，导致高并发下请求卡顿。
    - **风险**：SSL 验证被禁用 (`verify=False`)，存在安全隐患。
2.  **前端工程结构混乱 (Major)**
    - 根目录下直接存放 `components`, `services`, `App.tsx`，未遵循标准的 `src/` 目录结构，难以维护。
    - 存在已废弃文件（如 `components/Dashboard.tsx` 标记为 deprecated），干扰开发。
3.  **数据源脆弱性 (High)**
    - 强依赖腾讯、新浪等非官方 API 接口，且硬编码在代码中。一旦上游接口变动或封禁 IP，服务将直接瘫痪。
    - 缺乏完善的重试机制和降级策略。

## 2. 优化重构计划

为了提升项目的稳定性与可维护性，我建议执行以下三个阶段的优化：

### 阶段一：工程结构标准化 (Frontend Refactoring)
**目标**：清理混乱的目录结构，符合现代 React 项目规范。
1.  创建 `src/` 目录，将 `components`, `services`, `App.tsx`, `main.tsx`, `types.ts`, `utils` 等全部迁移至 `src/`。
2.  清理根目录，仅保留配置文件（`vite.config.ts`, `package.json` 等）。
3.  删除标记为 deprecated 的无用文件。
4.  修复因路径变更导致的 import 错误。

### 阶段二：后端性能与规范优化 (Backend Optimization)
**目标**：解决并发阻塞问题，提升接口响应速度。
1.  引入 `httpx` 库替代 `requests`，将所有外部数据获取逻辑重构为**异步非阻塞 (Async/Await)** 模式。
2.  封装统一的 `ExternalAPIClient`，统一处理超时、重试和 User-Agent 轮询。
3.  移除 `verify=False` 或添加必要的证书配置。

### 阶段三：健壮性提升 (Reliability)
**目标**：增强系统容错能力。
1.  在后端增加对外部 API 的熔断保护（当连续失败时返回缓存或空数据，避免前端无限等待）。
2.  优化前端轮询机制，考虑使用 `React Query` 或 `SWR` 替代简单的 `setInterval`，或在未来升级为 WebSocket。

---

**建议立即执行「阶段一」与「阶段二」的部分关键修复。** 你是否同意这个重构方案？