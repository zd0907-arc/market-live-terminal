# 数据源战略深度评估与执行计划

您提供的第三方 AI 建议非常有价值，特别是关于腾讯 `ff` (flow funds) 接口的线索和对东财地位的确认。结合我们之前的实测结果，我为您梳理出最终的**“三步走”数据源战略**：

### 1. 核心判断
*   **新浪 (Sina)**：**目前无可替代的核心**。虽然古老，但它稳定地提供了我们计算“超大单占比”所需的 `r0, r1, r2, r3` 四分类数据。我们将继续将其作为**“主力动态”模块的唯一数据源**。
*   **东财 (Eastmoney)**：**理论上的天花板，现实中的大坑**。第三方 AI 说得对，东财字段最全，但我们的实测（`f62` 返回 0 或异常值）证明其 Web 接口可能有反爬或加密。**策略：暂不接入，待后续专项攻克**。
*   **腾讯 (Tencent)**：**最具潜力的辅助**。第三方 AI 提到了 `qt.gtimg.cn/q=ff_sz000001` 这个接口。如果能破解这个接口，我们就能得到腾讯版的主力资金流，**作为新浪的“交叉验证”**。

### 2. 执行计划：双源并举，算法融合

我们不搞简单的“切换数据源”（非黑即白），而是实施**“主源 + 辅源”的融合展示**策略。

#### 第一步：挖掘腾讯 `ff` 接口 (验证可行性)
我会立即编写脚本 `explore_tencent_ff.py`，测试 `q=ff_...` 接口是否可用，以及返回的数据格式是什么。
*   如果可用且数据合理：我们将把它做成一个新的图表或指标，叫**“腾讯主力情绪”**。
*   如果不可用：退回使用腾讯的基础快照（外盘-内盘）作为情绪指标。

#### 第二步：设计“融合算法” (Data Fusion)
与其让用户纠结信谁，不如我们给出一个**“综合主力评分”**：
*   **算法思路**：
    *   `Sina Score` = 基于 r0/r1 计算的净流入分。
    *   `Tencent Score` = 基于 `ff` 接口或 `外盘-内盘` 计算的净流入分。
    *   **Final Score** = `0.7 * Sina + 0.3 * Tencent`（权重可调）。
*   **展示方式**：在页面顶部给出一个直观的仪表盘或红绿条，告诉用户“全网主力共识”是买还是卖。

#### 第三步：前端落地
1.  **保持现状**：下方的“主力动态”图表继续用新浪数据，保证连续性和细节（超大单占比）。
2.  **新增模块**：在上方（或侧边）增加一个**“多源博弈概览”**，同时展示新浪和腾讯的判断结果，让用户自己看“神仙打架”还是“所见略同”。

### 3. 立即行动
我将先执行第一步：**探测腾讯资金流接口 (`ff`)**。这决定了我们后续能做到什么程度。

请批准执行探测脚本。